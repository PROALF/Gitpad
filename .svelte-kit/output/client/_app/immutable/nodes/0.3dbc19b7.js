import{S as ie,i as ue,s as fe,H as de,I as ge,J as me,b as E,f as c,K as ye,j as R,L as Ne,n as Z,M as $e,O as rt,e as p,o as G,a as I,t as q,c as v,q as W,g as O,d as F,h as o,k as u,r as Y,V as oe,l as Ve,P as nt,Q as lt,R as st,u as V,v as S,w as J,Y as ke,m as xe,U as Me,F as Be,D as ve,z as be,_ as Te,$ as ht,y as Le,a0 as gt,a1 as De,W as mt,X as Ue,a2 as at,a3 as Se,a4 as _t,Z as pt,C as vt,a5 as ot,p as bt,a6 as it,B as yt,T as $t,x as kt}from"../chunks/index.98ebe618.js";import{C as Ce,b as wt,L as Et,P as Ee,c as Tt,f as ze,M as Ae,d as ut,h as _e,a as Mt,i as Ct,j as xt,k as Bt,g as Lt,e as Re}from"../chunks/public.865a5e26.js";import{n as Nt,p as ft}from"../chunks/stores.997706bb.js";import{b as te}from"../chunks/singletons.db0d2646.js";import{m as Vt,U as At,s as je}from"../chunks/LoadingModalWritable.b3f40ccb.js";import{p as It,i as Ot,r as Oe,a as Dt,g as Pt,d as Ut,m as St}from"../chunks/LocalDB.a5da0a64.js";const zt=!0,Rt=zt;function jt(n){let e,r='<path fill="currentColor" d="M17 15V8h-2v7H8v2h7v7h2v-7h7v-2z"/>',t=[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},n[0]],s={};for(let l=0;l<t.length;l+=1)s=de(s,t[l]);return{c(){e=ge("svg"),this.h()},l(l){e=me(l,"svg",{viewBox:!0,width:!0,height:!0});var a=E(e);a.forEach(c),this.h()},h(){ye(e,s)},m(l,a){R(l,e,a),e.innerHTML=r},p(l,[a]){ye(e,s=Ne(t,[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},a&1&&l[0]]))},i:Z,o:Z,d(l){l&&c(e)}}}function Ht(n,e,r){return n.$$set=t=>{r(0,e=de(de({},e),$e(t)))},e=$e(e),[e]}class qt extends ie{constructor(e){super(),ue(this,e,Ht,jt,fe,{})}}function Ft(n){let e,r='<path fill="currentColor" d="M6 6h20v2H6zm0 6h20v2H6zm0 6h20v2H6zm0 6h20v2H6z"/>',t=[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},n[0]],s={};for(let l=0;l<t.length;l+=1)s=de(s,t[l]);return{c(){e=ge("svg"),this.h()},l(l){e=me(l,"svg",{viewBox:!0,width:!0,height:!0});var a=E(e);a.forEach(c),this.h()},h(){ye(e,s)},m(l,a){R(l,e,a),e.innerHTML=r},p(l,[a]){ye(e,s=Ne(t,[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},a&1&&l[0]]))},i:Z,o:Z,d(l){l&&c(e)}}}function Zt(n,e,r){return n.$$set=t=>{r(0,e=de(de({},e),$e(t)))},e=$e(e),[e]}class Kt extends ie{constructor(e){super(),ue(this,e,Zt,Ft,fe,{})}}function Gt(n){let e,r,t,s,l,a,f,h,i,g,d,m,y,_,T,D,M,b,L;t=new Kt({}),i=new qt({}),_=new Ce({});const C=n[7].default,A=rt(C,n,n[6],null);return{c(){e=p("nav"),r=p("button"),G(t.$$.fragment),s=I(),l=p("span"),a=q(n[0]),f=I(),h=p("a"),G(i.$$.fragment),g=I(),d=p("nav"),m=p("div"),y=p("button"),G(_.$$.fragment),T=I(),A&&A.c(),this.h()},l(w){e=v(w,"NAV",{class:!0});var U=E(e);r=v(U,"BUTTON",{type:!0,class:!0,"aria-label":!0});var re=E(r);W(t.$$.fragment,re),re.forEach(c),s=O(U),l=v(U,"SPAN",{class:!0});var se=E(l);a=F(se,n[0]),se.forEach(c),f=O(U),h=v(U,"A",{href:!0,class:!0});var K=E(h);W(i.$$.fragment,K),K.forEach(c),U.forEach(c),g=O(w),d=v(w,"NAV",{class:!0});var X=E(d);m=v(X,"DIV",{class:!0});var ne=E(m);y=v(ne,"BUTTON",{type:!0,class:!0,"aria-label":!0});var le=E(y);W(_.$$.fragment,le),le.forEach(c),ne.forEach(c),T=O(X),A&&A.l(X),X.forEach(c),this.h()},h(){o(r,"type","button"),o(r,"class","-ml-3 flex h-9 w-9 shrink-0 items-center justify-center"),o(r,"aria-label","Open menu"),o(l,"class","truncate px-4"),o(h,"href",`${te}/`),o(h,"class","-mr-3 flex h-9 w-9 shrink-0 items-center justify-center"),o(e,"class","flex h-12 items-center justify-between border-b bg-gray-50 px-4 dark:border-gray-800 dark:bg-gray-800/70 md:hidden"),o(y,"type","button"),o(y,"class","-mr-3 ml-auto flex h-9 w-9 items-center justify-center"),o(y,"aria-label","Close menu"),o(m,"class","flex h-12 items-center px-4"),o(d,"class",D="fixed inset-0 z-30 grid max-h-screen grid-cols-1 grid-rows-[auto,auto,1fr,auto] bg-white bg-gradient-to-l from-gray-50 dark:bg-gray-900 dark:from-gray-800/30 "+(n[1]?"block":"hidden"))},m(w,U){R(w,e,U),u(e,r),Y(t,r,null),n[9](r),u(e,s),u(e,l),u(l,a),u(e,f),u(e,h),Y(i,h,null),R(w,g,U),R(w,d,U),u(d,m),u(m,y),Y(_,y,null),n[11](y),u(d,T),A&&A.m(d,null),M=!0,b||(L=[oe(r,"click",n[8]),oe(y,"click",n[10])],b=!0)},p(w,[U]){(!M||U&1)&&Ve(a,w[0]),A&&A.p&&(!M||U&64)&&nt(A,C,w,w[6],M?st(C,w[6],U,null):lt(w[6]),null),(!M||U&2&&D!==(D="fixed inset-0 z-30 grid max-h-screen grid-cols-1 grid-rows-[auto,auto,1fr,auto] bg-white bg-gradient-to-l from-gray-50 dark:bg-gray-900 dark:from-gray-800/30 "+(w[1]?"block":"hidden")))&&o(d,"class",D)},i(w){M||(V(t.$$.fragment,w),V(i.$$.fragment,w),V(_.$$.fragment,w),V(A,w),M=!0)},o(w){S(t.$$.fragment,w),S(i.$$.fragment,w),S(_.$$.fragment,w),S(A,w),M=!1},d(w){w&&c(e),J(t),n[9](null),J(i),w&&c(g),w&&c(d),J(_),n[11](null),A&&A.d(w),b=!1,ke(L)}}}function Wt(n,e,r){let t;xe(n,Nt,T=>r(5,t=T));let{$$slots:s={},$$scope:l}=e,{isOpen:a=!1}=e,{title:f}=e,h,i;const g=Me(),d=()=>g("toggle",!0);function m(T){Be[T?"unshift":"push"](()=>{i=T,r(3,i)})}const y=()=>g("toggle",!1);function _(T){Be[T?"unshift":"push"](()=>{h=T,r(2,h)})}return n.$$set=T=>{"isOpen"in T&&r(1,a=T.isOpen),"title"in T&&r(0,f=T.title),"$$scope"in T&&r(6,l=T.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&r(0,f=f||"New Chat"),n.$$.dirty&32&&t&&g("toggle",!1),n.$$.dirty&14&&(a&&h?h.focus():!a&&Rt&&document.activeElement===h&&i.focus())},[f,a,h,i,g,t,l,s,d,m,y,_]}class Yt extends ie{constructor(e){super(),ue(this,e,Wt,Gt,fe,{isOpen:1,title:0})}}function Jt(){const{classList:n}=document.querySelector("html");n.contains("dark")?(n.remove("dark"),localStorage.theme="light"):(n.add("dark"),localStorage.theme="dark")}function Qt(n){let e,r='<path fill="currentColor" d="m13 24l-9-9l1.414-1.414L13 21.171L26.586 7.586L28 9L13 24z"/>',t=[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},n[0]],s={};for(let l=0;l<t.length;l+=1)s=de(s,t[l]);return{c(){e=ge("svg"),this.h()},l(l){e=me(l,"svg",{viewBox:!0,width:!0,height:!0});var a=E(e);a.forEach(c),this.h()},h(){ye(e,s)},m(l,a){R(l,e,a),e.innerHTML=r},p(l,[a]){ye(e,s=Ne(t,[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},a&1&&l[0]]))},i:Z,o:Z,d(l){l&&c(e)}}}function Xt(n,e,r){return n.$$set=t=>{r(0,e=de(de({},e),$e(t)))},e=$e(e),[e]}class er extends ie{constructor(e){super(),ue(this,e,Xt,Qt,fe,{})}}function tr(n){let e,r='<path fill="currentColor" d="M12 12h2v12h-2zm6 0h2v12h-2z"/><path fill="currentColor" d="M4 6v2h2v20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8h2V6zm4 22V8h16v20zm4-26h8v2h-8z"/>',t=[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},n[0]],s={};for(let l=0;l<t.length;l+=1)s=de(s,t[l]);return{c(){e=ge("svg"),this.h()},l(l){e=me(l,"svg",{viewBox:!0,width:!0,height:!0});var a=E(e);a.forEach(c),this.h()},h(){ye(e,s)},m(l,a){R(l,e,a),e.innerHTML=r},p(l,[a]){ye(e,s=Ne(t,[{viewBox:"0 0 32 32"},{width:"1.2em"},{height:"1.2em"},a&1&&l[0]]))},i:Z,o:Z,d(l){l&&c(e)}}}function rr(n,e,r){return n.$$set=t=>{r(0,e=de(de({},e),$e(t)))},e=$e(e),[e]}class nr extends ie{constructor(e){super(),ue(this,e,rr,tr,fe,{})}}function He(n){let e,r;return{c(){e=p("span"),r=q("Delete"),this.h()},l(t){e=v(t,"SPAN",{class:!0});var s=E(e);r=F(s,"Delete"),s.forEach(c),this.h()},h(){o(e,"class","font-semibold")},m(t,s){R(t,e,s),u(e,r)},d(t){t&&c(e)}}}function lr(n){let e,r,t,s,l,a,f,h;return r=new wt({props:{class:"text-xs text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"}}),l=new nr({props:{class:"text-xs text-gray-400  hover:text-gray-500 dark:hover:text-gray-300"}}),{c(){e=p("button"),G(r.$$.fragment),t=I(),s=p("button"),G(l.$$.fragment),this.h()},l(i){e=v(i,"BUTTON",{type:!0,class:!0,title:!0});var g=E(e);W(r.$$.fragment,g),g.forEach(c),t=O(i),s=v(i,"BUTTON",{type:!0,class:!0,title:!0});var d=E(s);W(l.$$.fragment,d),d.forEach(c),this.h()},h(){o(e,"type","button"),o(e,"class","flex h-5 w-5 items-center justify-center rounded md:hidden md:group-hover:flex"),o(e,"title","Edit conversation title"),o(s,"type","button"),o(s,"class","flex h-5 w-5 items-center justify-center rounded md:hidden md:group-hover:flex"),o(s,"title","Delete conversation")},m(i,g){R(i,e,g),Y(r,e,null),R(i,t,g),R(i,s,g),Y(l,s,null),a=!0,f||(h=[oe(e,"click",Te(n[6])),oe(s,"click",Te(n[7]))],f=!0)},p:Z,i(i){a||(V(r.$$.fragment,i),V(l.$$.fragment,i),a=!0)},o(i){S(r.$$.fragment,i),S(l.$$.fragment,i),a=!1},d(i){i&&c(e),J(r),i&&c(t),i&&c(s),J(l),f=!1,ke(h)}}}function sr(n){let e,r,t,s,l,a,f,h;return r=new er({props:{class:"text-xs text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"}}),l=new Ce({props:{class:"text-xs text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"}}),{c(){e=p("button"),G(r.$$.fragment),t=I(),s=p("button"),G(l.$$.fragment),this.h()},l(i){e=v(i,"BUTTON",{type:!0,class:!0,title:!0});var g=E(e);W(r.$$.fragment,g),g.forEach(c),t=O(i),s=v(i,"BUTTON",{type:!0,class:!0,title:!0});var d=E(s);W(l.$$.fragment,d),d.forEach(c),this.h()},h(){o(e,"type","button"),o(e,"class","flex h-5 w-5 items-center justify-center rounded md:hidden md:group-hover:flex"),o(e,"title","Confirm delete action"),o(s,"type","button"),o(s,"class","flex h-5 w-5 items-center justify-center rounded md:hidden md:group-hover:flex"),o(s,"title","Cancel delete action")},m(i,g){R(i,e,g),Y(r,e,null),R(i,t,g),R(i,s,g),Y(l,s,null),a=!0,f||(h=[oe(e,"click",Te(n[4])),oe(s,"click",Te(n[5]))],f=!0)},p:Z,i(i){a||(V(r.$$.fragment,i),V(l.$$.fragment,i),a=!0)},o(i){S(r.$$.fragment,i),S(l.$$.fragment,i),a=!1},d(i){i&&c(e),J(r),i&&c(t),i&&c(s),J(l),f=!1,ke(h)}}}function ar(n){let e,r,t,s=n[0].title+"",l,a,f,h,i,g,d,m,y,_=n[1]&&He();const T=[sr,lr],D=[];function M(b,L){return b[1]?0:1}return f=M(n),h=D[f]=T[f](n),{c(){e=p("a"),r=p("div"),_&&_.c(),t=I(),l=q(s),a=I(),h.c(),this.h()},l(b){e=v(b,"A",{"data-sveltekit-noscroll":!0,href:!0,class:!0});var L=E(e);r=v(L,"DIV",{class:!0});var C=E(r);_&&_.l(C),t=O(C),l=F(C,s),C.forEach(c),a=O(L),h.l(L),L.forEach(c),this.h()},h(){o(r,"class","flex-1 truncate"),o(e,"data-sveltekit-noscroll",""),o(e,"href",i=te+"/conversation/"+n[0].id),o(e,"class",g="group flex h-11 flex-none items-center gap-1.5 rounded-lg pl-3 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700 "+(n[0].id===n[2].params.id?"bg-gray-100 dark:bg-gray-700":""))},m(b,L){R(b,e,L),u(e,r),_&&_.m(r,null),u(r,t),u(r,l),u(e,a),D[f].m(e,null),d=!0,m||(y=[oe(e,"mouseleave",n[8]),oe(e,"click",n[9])],m=!0)},p(b,[L]){b[1]?_||(_=He(),_.c(),_.m(r,t)):_&&(_.d(1),_=null),(!d||L&1)&&s!==(s=b[0].title+"")&&Ve(l,s);let C=f;f=M(b),f===C?D[f].p(b,L):(ve(),S(D[C],1,1,()=>{D[C]=null}),be(),h=D[f],h?h.p(b,L):(h=D[f]=T[f](b),h.c()),V(h,1),h.m(e,null)),(!d||L&1&&i!==(i=te+"/conversation/"+b[0].id))&&o(e,"href",i),(!d||L&5&&g!==(g="group flex h-11 flex-none items-center gap-1.5 rounded-lg pl-3 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700 "+(b[0].id===b[2].params.id?"bg-gray-100 dark:bg-gray-700":"")))&&o(e,"class",g)},i(b){d||(V(h),d=!0)},o(b){S(h),d=!1},d(b){b&&c(e),_&&_.d(),D[f].d(),m=!1,ke(y)}}}function or(n,e,r){let t;xe(n,ft,y=>r(2,t=y));let{conv:s}=e,l=!1;const a=Me(),f=()=>a("deleteConversation",s.id),h=()=>{r(1,l=!1)},i=()=>{const y=prompt("Edit this conversation title:",s.title);y&&a("editConversationTitle",{id:s.id,title:y})},g=y=>{y.shiftKey?a("deleteConversation",s.id):r(1,l=!0)},d=()=>{r(1,l=!1)},m=()=>{It.set(s.id)};return n.$$set=y=>{"conv"in y&&r(0,s=y.conv)},[s,l,t,a,f,h,i,g,d,m]}class ir extends ie{constructor(e){super(),ue(this,e,or,ar,fe,{conv:0})}}function qe(n,e,r){const t=n.slice();return t[9]=e[r],t}function Fe(n,e){let r,t,s;return t=new ir({props:{conv:e[9]}}),t.$on("editConversationTitle",e[5]),t.$on("deleteConversation",e[6]),{key:n,first:null,c(){r=Le(),G(t.$$.fragment),this.h()},l(l){r=Le(),W(t.$$.fragment,l),this.h()},h(){this.first=r},m(l,a){R(l,r,a),Y(t,l,a),s=!0},p(l,a){e=l;const f={};a&2&&(f.conv=e[9]),t.$set(f)},i(l){s||(V(t.$$.fragment,l),s=!0)},o(l){S(t.$$.fragment,l),s=!1},d(l){l&&c(r),J(t,l)}}}function Ze(n){var h,i;let e,r,t=(((h=n[3])==null?void 0:h.username)||((i=n[3])==null?void 0:i.email))+"",s,l,a,f;return{c(){e=p("form"),r=p("span"),s=q(t),l=I(),a=p("button"),f=q("Sign Out"),this.h()},l(g){e=v(g,"FORM",{action:!0,method:!0,class:!0});var d=E(e);r=v(d,"SPAN",{class:!0});var m=E(r);s=F(m,t),m.forEach(c),l=O(d),a=v(d,"BUTTON",{type:!0,class:!0});var y=E(a);f=F(y,"Sign Out"),y.forEach(c),d.forEach(c),this.h()},h(){o(r,"class","flex h-9 flex-none shrink items-center gap-1.5 truncate pr-2 text-gray-500 dark:text-gray-400"),o(a,"type","submit"),o(a,"class","ml-auto h-6 flex-none items-center gap-1.5 rounded-md border bg-white px-2 text-gray-700 shadow-sm group-hover:flex hover:shadow-none dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400 dark:hover:text-gray-300 md:hidden"),o(e,"action",te+"/logout"),o(e,"method","post"),o(e,"class","group flex items-center gap-1.5 rounded-lg pl-3 pr-2 hover:bg-gray-100 dark:hover:bg-gray-700")},m(g,d){R(g,e,d),u(e,r),u(r,s),u(e,l),u(e,a),u(a,f)},p(g,d){var m,y;d&8&&t!==(t=(((m=g[3])==null?void 0:m.username)||((y=g[3])==null?void 0:y.email))+"")&&Ve(s,t)},d(g){g&&c(e)}}}function Ke(n){let e,r,t,s;return{c(){e=p("button"),r=q("Login"),this.h()},l(l){e=v(l,"BUTTON",{type:!0,class:!0});var a=E(e);r=F(a,"Login"),a.forEach(c),this.h()},h(){o(e,"type","button"),o(e,"class","flex h-9 flex-none items-center gap-1.5 rounded-lg pl-3 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700")},m(l,a){R(l,e,a),u(e,r),t||(s=oe(e,"click",n[7]),t=!0)},p:Z,d(l){l&&c(e),t=!1,s()}}}function ur(n){var H,k;let e,r,t,s,l,a,f,h,i,g,d=[],m=new Map,y,_,T,D,M,b,L,C,A,w,U,re,se,K,X,ne,le,ee;t=new Et({props:{classNames:"mr-1"}});let ce=n[1];const ae=$=>$[9].id;for(let $=0;$<ce.length;$+=1){let z=qe(n,ce,$),j=ae(z);m.set(j,d[$]=Fe(j,z))}let N=(((H=n[3])==null?void 0:H.username)||((k=n[3])==null?void 0:k.email))&&Ze(n),P=n[2]&&Ke(n);return{c(){e=p("div"),r=p("a"),G(t.$$.fragment),s=I(),l=q(Ee),a=I(),f=p("a"),h=q("New Chat"),i=I(),g=p("div");for(let $=0;$<d.length;$+=1)d[$].c();y=I(),_=p("div"),N&&N.c(),T=I(),P&&P.c(),D=I(),M=p("button"),b=q("Theme"),L=I(),C=p("button"),A=q("Settings"),w=I(),U=p("a"),re=q("Feedback"),se=I(),K=p("a"),X=q("About & Privacy"),this.h()},l($){e=v($,"DIV",{class:!0});var z=E(e);r=v(z,"A",{class:!0,href:!0});var j=E(r);W(t.$$.fragment,j),s=O(j),l=F(j,Ee),j.forEach(c),a=O(z),f=v(z,"A",{href:!0,class:!0});var pe=E(f);h=F(pe,"New Chat"),pe.forEach(c),z.forEach(c),i=O($),g=v($,"DIV",{class:!0});var x=E(g);for(let Ie=0;Ie<d.length;Ie+=1)d[Ie].l(x);x.forEach(c),y=O($),_=v($,"DIV",{class:!0});var B=E(_);N&&N.l(B),T=O(B),P&&P.l(B),D=O(B),M=v(B,"BUTTON",{type:!0,class:!0});var Q=E(M);b=F(Q,"Theme"),Q.forEach(c),L=O(B),C=v(B,"BUTTON",{type:!0,class:!0});var he=E(C);A=F(he,"Settings"),he.forEach(c),w=O(B),U=v(B,"A",{href:!0,target:!0,rel:!0,class:!0});var we=E(U);re=F(we,"Feedback"),we.forEach(c),se=O(B),K=v(B,"A",{href:!0,class:!0});var Pe=E(K);X=F(Pe,"About & Privacy"),Pe.forEach(c),B.forEach(c),this.h()},h(){o(r,"class","flex items-center rounded-xl text-lg font-semibold"),o(r,"href",Tt+te+"/"),o(f,"href",`${te}/`),o(f,"class","flex rounded-lg border bg-white px-2 py-0.5 text-center shadow-sm hover:shadow-none dark:border-gray-600 dark:bg-gray-700"),o(e,"class","sticky top-0 flex flex-none items-center justify-between px-3 py-3.5 max-sm:pt-0"),o(g,"class","scrollbar-custom flex flex-col gap-1 overflow-y-auto rounded-r-xl bg-gradient-to-l from-gray-50 px-3 pb-3 pt-2 dark:from-gray-800/30"),o(M,"type","button"),o(M,"class","flex h-9 flex-none items-center gap-1.5 rounded-lg pl-3 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700"),o(C,"type","button"),o(C,"class","flex h-9 flex-none items-center gap-1.5 rounded-lg pl-3 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700"),o(U,"href","https://github.com/mithril-security/blind_chat/issues"),o(U,"target","_blank"),o(U,"rel","noreferrer"),o(U,"class","flex h-9 flex-none items-center gap-1.5 rounded-lg pl-3 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700"),o(K,"href",te+"/privacy"),o(K,"class","flex h-9 flex-none items-center gap-1.5 rounded-lg pl-3 pr-2 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700"),o(_,"class","mt-0.5 flex flex-col gap-1 rounded-r-xl bg-gradient-to-l from-gray-50 p-3 text-sm dark:from-gray-800/30")},m($,z){R($,e,z),u(e,r),Y(t,r,null),u(r,s),u(r,l),u(e,a),u(e,f),u(f,h),R($,i,z),R($,g,z);for(let j=0;j<d.length;j+=1)d[j]&&d[j].m(g,null);R($,y,z),R($,_,z),N&&N.m(_,null),u(_,T),P&&P.m(_,null),u(_,D),u(_,M),u(M,b),u(_,L),u(_,C),u(C,A),u(_,w),u(_,U),u(U,re),u(_,se),u(_,K),u(K,X),ne=!0,le||(ee=[oe(M,"click",Jt),oe(C,"click",n[8])],le=!0)},p($,[z]){var j,pe;z&2&&(ce=$[1],ve(),d=ht(d,z,ae,1,$,ce,m,g,gt,Fe,null,qe),be()),(j=$[3])!=null&&j.username||(pe=$[3])!=null&&pe.email?N?N.p($,z):(N=Ze($),N.c(),N.m(_,T)):N&&(N.d(1),N=null),$[2]?P?P.p($,z):(P=Ke($),P.c(),P.m(_,D)):P&&(P.d(1),P=null)},i($){if(!ne){V(t.$$.fragment,$);for(let z=0;z<ce.length;z+=1)V(d[z]);ne=!0}},o($){S(t.$$.fragment,$);for(let z=0;z<d.length;z+=1)S(d[z]);ne=!1},d($){$&&c(e),J(t),$&&c(i),$&&c(g);for(let z=0;z<d.length;z+=1)d[z].d();$&&c(y),$&&c(_),N&&N.d(),P&&P.d(),le=!1,ke(ee)}}}function fr(n,e,r){const t=Me();let{conversations:s=[]}=e,{canLogin:l}=e,{user:a}=e,{loginModalVisible:f}=e;function h(m){De.call(this,n,m)}function i(m){De.call(this,n,m)}const g=()=>r(0,f=!0),d=()=>t("clickSettings");return n.$$set=m=>{"conversations"in m&&r(1,s=m.conversations),"canLogin"in m&&r(2,l=m.canLogin),"user"in m&&r(3,a=m.user),"loginModalVisible"in m&&r(0,f=m.loginModalVisible)},[f,s,l,a,t,h,i,g,d]}class ct extends ie{constructor(e){super(),ue(this,e,fr,ur,fe,{conversations:1,canLogin:2,user:3,loginModalVisible:0})}}function cr(n){let e,r,t,s,l,a,f;return{c(){e=ge("svg"),r=ge("path"),t=ge("path"),s=ge("defs"),l=ge("radialGradient"),a=ge("stop"),f=ge("stop"),this.h()},l(h){e=me(h,"svg",{xmlns:!0,width:!0,height:!0,class:!0,fill:!0,viewBox:!0});var i=E(e);r=me(i,"path",{fill:!0,d:!0}),E(r).forEach(c),t=me(i,"path",{fill:!0,"fill-rule":!0,d:!0,"clip-rule":!0}),E(t).forEach(c),s=me(i,"defs",{});var g=E(s);l=me(g,"radialGradient",{id:!0,cx:!0,cy:!0,r:!0,gradientTransform:!0,gradientUnits:!0});var d=E(l);a=me(d,"stop",{"stop-color":!0}),E(a).forEach(c),f=me(d,"stop",{offset:!0,"stop-color":!0}),E(f).forEach(c),d.forEach(c),g.forEach(c),i.forEach(c),this.h()},h(){o(r,"fill","url(#a)"),o(r,"d","M.93 10.65A10.17 10.17 0 0 1 11.11.48h4.67a9.45 9.45 0 0 1 0 18.89H4.53L1.62 22.2a.38.38 0 0 1-.69-.28V10.65Z"),o(t,"fill","#000"),o(t,"fill-rule","evenodd"),o(t,"d","M11.52 7.4a1.86 1.86 0 1 1-3.72 0 1.86 1.86 0 0 1 3.72 0Zm7.57 0a1.86 1.86 0 1 1-3.73 0 1.86 1.86 0 0 1 3.73 0ZM8.9 12.9a.55.55 0 0 0-.11.35.76.76 0 0 1-1.51 0c0-.95.67-1.94 1.76-1.94 1.09 0 1.76 1 1.76 1.94H9.3a.55.55 0 0 0-.12-.35c-.06-.07-.1-.08-.13-.08s-.08 0-.14.08Zm4.04 0a.55.55 0 0 0-.12.35h-1.51c0-.95.68-1.94 1.76-1.94 1.1 0 1.77 1 1.77 1.94h-1.51a.55.55 0 0 0-.12-.35c-.06-.07-.11-.08-.14-.08-.02 0-.07 0-.13.08Zm-1.89.79c-.02 0-.07-.01-.13-.08a.55.55 0 0 1-.12-.36h-1.5c0 .95.67 1.95 1.75 1.95 1.1 0 1.77-1 1.77-1.95h-1.51c0 .16-.06.28-.12.36-.06.07-.11.08-.14.08Zm4.04 0c-.03 0-.08-.01-.14-.08a.55.55 0 0 1-.12-.36h-1.5c0 .95.67 1.95 1.76 1.95 1.08 0 1.76-1 1.76-1.95h-1.51c0 .16-.06.28-.12.36-.06.07-.11.08-.13.08Zm1.76-.44c0-.16.05-.28.12-.35.06-.07.1-.08.13-.08s.08 0 .14.08c.06.07.11.2.11.35a.76.76 0 0 0 1.51 0c0-.95-.67-1.94-1.76-1.94-1.09 0-1.76 1-1.76 1.94h1.5Z"),o(t,"clip-rule","evenodd"),o(a,"stop-color","#FFD21E"),o(f,"offset","1"),o(f,"stop-color","red"),o(l,"id","a"),o(l,"cx","0"),o(l,"cy","0"),o(l,"r","1"),o(l,"gradientTransform","matrix(0 31.37 -34.85 0 13.08 -9.02)"),o(l,"gradientUnits","userSpaceOnUse"),o(e,"xmlns","http://www.w3.org/2000/svg"),o(e,"width","1em"),o(e,"height","1em"),o(e,"class",n[0]),o(e,"fill","none"),o(e,"viewBox","0 0 26 23")},m(h,i){R(h,e,i),u(e,r),u(e,t),u(e,s),u(s,l),u(l,a),u(l,f)},p(h,[i]){i&1&&o(e,"class",h[0])},i:Z,o:Z,d(h){h&&c(e)}}}function dr(n,e,r){let{classNames:t=""}=e;return n.$$set=s=>{"classNames"in s&&r(0,t=s.classNames)},[t]}class hr extends ie{constructor(e){super(),ue(this,e,dr,cr,fe,{classNames:0})}}function gr(n){let e,r,t,s,l,a,f,h;return t=new hr({props:{classNames:"text-2xl mr-2"}}),{c(){e=p("div"),r=p("div"),G(t.$$.fragment),s=I(),l=p("h2"),a=q(n[0]),this.h()},l(i){e=v(i,"DIV",{class:!0});var g=E(e);r=v(g,"DIV",{class:!0});var d=E(r);W(t.$$.fragment,d),s=O(d),l=v(d,"H2",{class:!0});var m=E(l);a=F(m,n[0]),m.forEach(c),d.forEach(c),g.forEach(c),this.h()},h(){o(l,"class","font-semibold"),o(r,"class","pointer-events-auto flex items-center rounded-full bg-white/90 px-3 py-1 shadow-sm dark:bg-gray-900/80"),o(e,"class","pointer-events-none fixed right-0 top-12 z-20 bg-gradient-to-bl from-red-500/20 via-red-500/0 to-red-500/0 pb-36 pl-36 pr-2 pt-2 md:top-0 md:pr-8 md:pt-5")},m(i,g){R(i,e,g),u(e,r),Y(t,r,null),u(r,s),u(r,l),u(l,a),h=!0},p(i,[g]){(!h||g&1)&&Ve(a,i[0])},i(i){h||(V(t.$$.fragment,i),mt(()=>{h&&(f||(f=Ue(e,ze,{duration:300},!0)),f.run(1))}),h=!0)},o(i){S(t.$$.fragment,i),f||(f=Ue(e,ze,{duration:300},!1)),f.run(0),h=!1},d(i){i&&c(e),J(t),i&&f&&f.end()}}}function mr(n,e,r){let{message:t=""}=e;return n.$$set=s=>{"message"in s&&r(0,t=s.message)},[t]}class _r extends ie{constructor(e){super(),ue(this,e,mr,gr,fe,{message:0})}}function pr(n){let e,r,t,s,l,a,f,h,i,g,d,m,y,_,T,D,M,b,L,C,A,w,U,re,se,K,X,ne,le,ee,ce;return i=new Ce({props:{class:"text-gray-900 group-hover:text-gray-500"}}),{c(){e=p("div"),r=p("div"),t=p("h1"),s=q("You are about to download an AI model on your device"),l=I(),a=p("br"),f=I(),h=p("button"),G(i.$$.fragment),g=I(),d=p("div"),m=p("br"),y=q("To ensure your conversations with our AI remain private, our web application sends a model to your device to perform inference locally. No data leaves your device."),_=p("br"),T=I(),D=p("br"),M=q("This might be demanding in terms of bandwidth, storage and computing power on your side."),b=p("br"),L=I(),C=p("br"),A=I(),w=p("div"),U=p("br"),re=p("b"),se=q("Mobile usage is not advised."),K=p("br"),X=I(),ne=p("br"),this.h()},l(ae){e=v(ae,"DIV",{class:!0});var N=E(e);r=v(N,"DIV",{class:!0});var P=E(r);t=v(P,"H1",{});var H=E(t);s=F(H,"You are about to download an AI model on your device"),H.forEach(c),l=O(P),a=v(P,"BR",{}),f=O(P),h=v(P,"BUTTON",{type:!0,class:!0});var k=E(h);W(i.$$.fragment,k),k.forEach(c),P.forEach(c),g=O(N),d=v(N,"DIV",{class:!0});var $=E(d);m=v($,"BR",{}),y=F($,"To ensure your conversations with our AI remain private, our web application sends a model to your device to perform inference locally. No data leaves your device."),_=v($,"BR",{}),T=O($),D=v($,"BR",{}),M=F($,"This might be demanding in terms of bandwidth, storage and computing power on your side."),b=v($,"BR",{}),L=O($),C=v($,"BR",{}),$.forEach(c),A=O(N),w=v(N,"DIV",{class:!0});var z=E(w);U=v(z,"BR",{}),re=v(z,"B",{});var j=E(re);se=F(j,"Mobile usage is not advised."),j.forEach(c),K=v(z,"BR",{}),z.forEach(c),X=O(N),ne=v(N,"BR",{}),N.forEach(c),this.h()},h(){o(h,"type","button"),o(h,"class","group"),o(r,"class","flex items-start text-xl font-bold text-gray-800 m-2"),o(d,"class","flex items-start text-m text-gray-800 m-2"),o(w,"class","flex items-start text-m text-gray-800 m-2"),o(e,"class","flex w-full flex-col gap-0 p-2")},m(ae,N){R(ae,e,N),u(e,r),u(r,t),u(t,s),u(r,l),u(r,a),u(r,f),u(r,h),Y(i,h,null),u(e,g),u(e,d),u(d,m),u(d,y),u(d,_),u(d,T),u(d,D),u(d,M),u(d,b),u(d,L),u(d,C),u(e,A),u(e,w),u(w,U),u(w,re),u(re,se),u(w,K),u(e,X),u(e,ne),le=!0,ee||(ce=oe(h,"click",n[1]),ee=!0)},p:Z,i(ae){le||(V(i.$$.fragment,ae),le=!0)},o(ae){S(i.$$.fragment,ae),le=!1},d(ae){ae&&c(e),J(i),ee=!1,ce()}}}function vr(n){let e,r;return e=new Ae({props:{$$slots:{default:[pr]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,s){Y(e,t,s),r=!0},p(t,[s]){const l={};s&4&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){r||(V(e.$$.fragment,t),r=!0)},o(t){S(e.$$.fragment,t),r=!1},d(t){J(e,t)}}}function br(n){const e=Me();return[e,()=>e("close")]}class yr extends ie{constructor(e){super(),ue(this,e,br,vr,fe,{})}}function Ge(n){let e,r;return e=new Ae({props:{$$slots:{default:[$r]},$$scope:{ctx:n}}}),e.$on("close",n[9]),{c(){G(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,s){Y(e,t,s),r=!0},p(t,s){const l={};s&2049&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){r||(V(e.$$.fragment,t),r=!0)},o(t){S(e.$$.fragment,t),r=!1},d(t){J(e,t)}}}function $r(n){let e,r,t,s,l,a,f,h,i,g,d,m,y,_,T,D;return f=new Ce({props:{class:"text-gray-900 group-hover:text-gray-500"}}),{c(){e=p("form"),r=p("div"),t=p("h2"),s=q("Are you sure?"),l=I(),a=p("button"),G(f.$$.fragment),h=I(),i=p("p"),g=q("This action will delete all your conversations. This cannot be undone."),d=I(),m=p("button"),y=q("Confirm deletion"),this.h()},l(M){e=v(M,"FORM",{method:!0,action:!0,class:!0});var b=E(e);r=v(b,"DIV",{class:!0});var L=E(r);t=v(L,"H2",{});var C=E(t);s=F(C,"Are you sure?"),C.forEach(c),l=O(L),a=v(L,"BUTTON",{type:!0,class:!0});var A=E(a);W(f.$$.fragment,A),A.forEach(c),L.forEach(c),h=O(b),i=v(b,"P",{class:!0});var w=E(i);g=F(w,"This action will delete all your conversations. This cannot be undone."),w.forEach(c),d=O(b),m=v(b,"BUTTON",{type:!0,class:!0});var U=E(m);y=F(U,"Confirm deletion"),U.forEach(c),b.forEach(c),this.h()},h(){o(a,"type","button"),o(a,"class","group"),o(r,"class","flex items-start justify-between text-xl font-semibold text-gray-800"),o(i,"class","text-gray-800"),o(m,"type","submit"),o(m,"class","mt-2 rounded-full bg-red-700 px-5 py-2 text-lg font-semibold text-gray-100 ring-gray-400 ring-offset-1 transition-all focus-visible:outline-none focus-visible:ring hover:ring"),o(e,"method","post"),o(e,"action",te+"/conversations?/delete"),o(e,"class","flex w-full flex-col gap-5 p-6")},m(M,b){R(M,e,b),u(e,r),u(r,t),u(t,s),u(r,l),u(r,a),Y(f,a,null),u(e,h),u(e,i),u(i,g),u(e,d),u(e,m),u(m,y),_=!0,T||(D=[oe(a,"click",n[7]),at(ut.call(null,e,n[8]))],T=!0)},p:Z,i(M){_||(V(f.$$.fragment,M),_=!0)},o(M){S(f.$$.fragment,M),_=!1},d(M){M&&c(e),J(f),T=!1,ke(D)}}}function kr(n){let e,r,t,s,l,a,f,h,i,g,d,m,y,_,T,D,M,b,L;f=new Ce({props:{class:"text-gray-900 group-hover:text-gray-500"}});let C=n[0]&&Ge(n);return{c(){e=p("div"),r=p("div"),t=p("h2"),s=q("Settings"),l=I(),a=p("button"),G(f.$$.fragment),h=I(),i=p("form"),g=p("form"),d=p("button"),m=q("Delete all conversations"),y=I(),_=p("button"),T=q("Apply"),D=I(),C&&C.c(),this.h()},l(A){e=v(A,"DIV",{class:!0});var w=E(e);r=v(w,"DIV",{class:!0});var U=E(r);t=v(U,"H2",{});var re=E(t);s=F(re,"Settings"),re.forEach(c),l=O(U),a=v(U,"BUTTON",{type:!0,class:!0});var se=E(a);W(f.$$.fragment,se),se.forEach(c),U.forEach(c),h=O(w),i=v(w,"FORM",{class:!0,method:!0,action:!0});var K=E(i);g=v(K,"FORM",{});var X=E(g);d=v(X,"BUTTON",{type:!0,class:!0});var ne=E(d);m=F(ne,"Delete all conversations"),ne.forEach(c),X.forEach(c),y=O(K),_=v(K,"BUTTON",{type:!0,class:!0});var le=E(_);T=F(le,"Apply"),le.forEach(c),K.forEach(c),D=O(w),C&&C.l(w),w.forEach(c),this.h()},h(){o(a,"type","button"),o(a,"class","group"),o(r,"class","flex items-start justify-between text-xl font-semibold text-gray-800"),o(d,"type","submit"),o(d,"class","underline decoration-gray-300 hover:decoration-gray-700"),o(_,"type","submit"),o(_,"class","mt-2 rounded-full bg-black px-5 py-2 text-lg font-semibold text-gray-100 ring-gray-400 ring-offset-1 transition-all focus-visible:outline-none focus-visible:ring hover:ring"),o(i,"class","flex flex-col gap-5"),o(i,"method","post"),o(i,"action",te+"/settings"),o(e,"class","flex w-full flex-col gap-5 p-6")},m(A,w){R(A,e,w),u(e,r),u(r,t),u(t,s),u(r,l),u(r,a),Y(f,a,null),u(e,h),u(e,i),u(i,g),u(g,d),u(d,m),u(i,y),u(i,_),u(_,T),u(e,D),C&&C.m(e,null),M=!0,b||(L=[oe(a,"click",n[4]),oe(g,"submit",Te(n[5])),at(ut.call(null,i,n[6]))],b=!0)},p(A,w){A[0]?C?(C.p(A,w),w&1&&V(C,1)):(C=Ge(A),C.c(),V(C,1),C.m(e,null)):C&&(ve(),S(C,1,1,()=>{C=null}),be())},i(A){M||(V(f.$$.fragment,A),V(C),M=!0)},o(A){S(f.$$.fragment,A),S(C),M=!1},d(A){A&&c(e),J(f),C&&C.d(),b=!1,ke(L)}}}function wr(n){let e,r;return e=new Ae({props:{$$slots:{default:[kr]},$$scope:{ctx:n}}}),e.$on("close",n[10]),{c(){G(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,s){Y(e,t,s),r=!0},p(t,[s]){const l={};s&2049&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){r||(V(e.$$.fragment,t),r=!0)},o(t){S(e.$$.fragment,t),r=!1},d(t){J(e,t)}}}function Er(n,e,r){let{settings:t}=e,{models:s}=e,l=!1;const a=Me(),f=()=>a("close"),h=()=>r(0,l=!0),i=()=>{a("close")},g=()=>r(0,l=!1),d=()=>{a("close")},m=()=>r(0,l=!1);function y(_){De.call(this,n,_)}return n.$$set=_=>{"settings"in _&&r(2,t=_.settings),"models"in _&&r(3,s=_.models)},[l,a,t,s,f,h,i,g,d,m,y]}class Tr extends ie{constructor(e){super(),ue(this,e,Er,wr,fe,{settings:2,models:3})}}function We(n,e,r){const t=n.slice();return t[4]=e[r][0],t[5]=e[r][1],t}function Mr(n){return{c:Z,l:Z,m:Z,p:Z,d:Z}}function Cr(n){let e,r=[...n[2]],t=[];for(let s=0;s<r.length;s+=1)t[s]=Ye(We(n,r,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=Le()},l(s){for(let l=0;l<t.length;l+=1)t[l].l(s);e=Le()},m(s,l){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(s,l);R(s,e,l)},p(s,l){if(l&4){r=[...s[2]];let a;for(a=0;a<r.length;a+=1){const f=We(s,r,a);t[a]?t[a].p(f,l):(t[a]=Ye(f),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=r.length}},d(s){pt(t,s),s&&c(e)}}}function Ye(n){let e,r=n[4]+"",t,s,l,a,f=n[5]+"",h,i,g,d;return{c(){e=p("p"),t=q(r),s=I(),l=p("div"),a=p("div"),h=q(f),i=q("%"),g=I(),d=p("br"),this.h()},l(m){e=v(m,"P",{class:!0});var y=E(e);t=F(y,r),y.forEach(c),s=O(m),l=v(m,"DIV",{class:!0});var _=E(l);a=v(_,"DIV",{class:!0,style:!0});var T=E(a);h=F(T,f),i=F(T,"%"),T.forEach(c),_.forEach(c),g=O(m),d=v(m,"BR",{}),this.h()},h(){o(e,"class","text-s text-gray-800"),o(a,"class","w3-blue"),vt(a,"width",n[5]+"%"),o(l,"class","w3-light-grey")},m(m,y){R(m,e,y),u(e,t),R(m,s,y),R(m,l,y),u(l,a),u(a,h),u(a,i),R(m,g,y),R(m,d,y)},p:Z,d(m){m&&c(e),m&&c(s),m&&c(l),m&&c(g),m&&c(d)}}}function xr(n){return{c:Z,l:Z,m:Z,p:Z,d:Z}}function Br(n){let e,r,t,s,l,a,f,h,i,g,d,m,y,_,T={ctx:n,current:null,token:null,hasCatch:!1,pending:xr,then:Cr,catch:Mr,value:3};return Se(_=n[1](n[0]),T),{c(){e=p("div"),r=p("div"),t=p("h2"),s=q("Loading the model..."),l=I(),a=p("br"),f=I(),h=p("div"),i=p("br"),g=q("Please wait while we download the model. This has to be done only once."),d=I(),m=p("br"),y=I(),T.block.c(),this.h()},l(D){e=v(D,"DIV",{class:!0});var M=E(e);r=v(M,"DIV",{class:!0});var b=E(r);t=v(b,"H2",{});var L=E(t);s=F(L,"Loading the model..."),L.forEach(c),l=O(b),a=v(b,"BR",{}),b.forEach(c),f=O(M),h=v(M,"DIV",{class:!0});var C=E(h);i=v(C,"BR",{}),g=F(C,"Please wait while we download the model. This has to be done only once."),C.forEach(c),d=O(M),m=v(M,"BR",{}),y=O(M),T.block.l(M),M.forEach(c),this.h()},h(){o(r,"class","flex items-start text-xl font-bold text-gray-800"),o(h,"class","flex items-start text-s text-gray-800"),o(e,"class","flex w-full flex-col gap-0 p-2")},m(D,M){R(D,e,M),u(e,r),u(r,t),u(t,s),u(r,l),u(r,a),u(e,f),u(e,h),u(h,i),u(h,g),u(e,d),u(e,m),u(e,y),T.block.m(e,T.anchor=null),T.mount=()=>e,T.anchor=null},p(D,M){n=D,T.ctx=n,M&1&&_!==(_=n[1](n[0]))&&Se(_,T)||_t(T,n,M)},d(D){D&&c(e),T.block.d(),T.token=null,T=null}}}function Lr(n){let e,r;return e=new Ae({props:{$$slots:{default:[Br]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,s){Y(e,t,s),r=!0},p(t,[s]){const l={};s&257&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){r||(V(e.$$.fragment,t),r=!0)},o(t){S(e.$$.fragment,t),r=!1},d(t){J(e,t)}}}function Nr(n,e,r){const t=async a=>{};let s=new Map,l=1;return Vt.subscribe(a=>{const[f,h]=a;r(0,l=Number(h)),f.startsWith("onnx")&&s.set(f,Math.floor(Number(h)))}),[l,t,s]}class Vr extends ie{constructor(e){super(),ue(this,e,Nr,Lr,fe,{})}}function Ar(n){let e,r,t;function s(a){n[15](a)}let l={conversations:n[3],user:n[0].user,canLogin:n[0].user===void 0&&n[0].requiresLogin};return n[7]!==void 0&&(l.loginModalVisible=n[7]),e=new ct({props:l}),Be.push(()=>ot(e,"loginModalVisible",s)),e.$on("shareConversation",n[16]),e.$on("deleteConversation",n[17]),e.$on("clickSettings",n[18]),e.$on("editConversationTitle",n[19]),{c(){G(e.$$.fragment)},l(a){W(e.$$.fragment,a)},m(a,f){Y(e,a,f),t=!0},p(a,f){const h={};f[0]&8&&(h.conversations=a[3]),f[0]&1&&(h.user=a[0].user),f[0]&1&&(h.canLogin=a[0].user===void 0&&a[0].requiresLogin),!r&&f[0]&128&&(r=!0,h.loginModalVisible=a[7],it(()=>r=!1)),e.$set(h)},i(a){t||(V(e.$$.fragment,a),t=!0)},o(a){S(e.$$.fragment,a),t=!1},d(a){J(e,a)}}}function Je(n){let e,r;return e=new _r({props:{message:n[6]}}),{c(){G(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,s){Y(e,t,s),r=!0},p(t,s){const l={};s[0]&64&&(l.message=t[6]),e.$set(l)},i(t){r||(V(e.$$.fragment,t),r=!0)},o(t){S(e.$$.fragment,t),r=!1},d(t){J(e,t)}}}function Qe(n){let e,r;return e=new yr({}),e.$on("close",n[27]),{c(){G(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,s){Y(e,t,s),r=!0},p:Z,i(t){r||(V(e.$$.fragment,t),r=!0)},o(t){S(e.$$.fragment,t),r=!1},d(t){J(e,t)}}}function Xe(n){let e,r;return e=new Vr({}),{c(){G(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,s){Y(e,t,s),r=!0},i(t){r||(V(e.$$.fragment,t),r=!0)},o(t){S(e.$$.fragment,t),r=!1},d(t){J(e,t)}}}function et(n){let e,r;return e=new Tr({props:{settings:n[0].settings,models:n[0].models}}),e.$on("close",n[28]),{c(){G(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,s){Y(e,t,s),r=!0},p(t,s){const l={};s[0]&1&&(l.settings=t[0].settings),s[0]&1&&(l.models=t[0].models),e.$set(l)},i(t){r||(V(e.$$.fragment,t),r=!0)},o(t){S(e.$$.fragment,t),r=!1},d(t){J(e,t)}}}function tt(n){let e,r;return e=new xt({props:{settings:n[0].settings}}),{c(){G(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,s){Y(e,t,s),r=!0},p(t,s){const l={};s[0]&1&&(l.settings=t[0].settings),e.$set(l)},i(t){r||(V(e.$$.fragment,t),r=!0)},o(t){S(e.$$.fragment,t),r=!1},d(t){J(e,t)}}}function Ir(n){var pe;let e,r,t,s,l,a,f,h,i,g,d,m,y,_,T,D,M,b,L,C,A,w,U,re,se,K,X,ne,le,ee;document.title=e=Ee,L=new Yt({props:{isOpen:n[4],title:(pe=n[3].find(n[20]))==null?void 0:pe.title,$$slots:{default:[Ar]},$$scope:{ctx:n}}}),L.$on("toggle",n[21]);function ce(x){n[22](x)}let ae={conversations:n[3],user:n[0].user,canLogin:n[0].user===void 0&&n[0].requiresLogin};n[7]!==void 0&&(ae.loginModalVisible=n[7]),w=new ct({props:ae}),Be.push(()=>ot(w,"loginModalVisible",ce)),w.$on("shareConversation",n[23]),w.$on("deleteConversation",n[24]),w.$on("clickSettings",n[25]),w.$on("editConversationTitle",n[26]);let N=n[6]&&Je(n),P=n[2]&&Qe(n),H=n[1]&&Xe(),k=n[5]&&et(n),$=(n[11]&&n[0].messagesBeforeLogin===0||n[7])&&tt(n);const z=n[14].default,j=rt(z,n,n[29],null);return{c(){r=p("meta"),t=p("meta"),s=p("meta"),l=p("meta"),f=p("meta"),i=p("link"),d=p("link"),y=p("link"),T=p("link"),M=I(),b=p("div"),G(L.$$.fragment),C=I(),A=p("nav"),G(w.$$.fragment),re=I(),N&&N.c(),se=I(),P&&P.c(),K=I(),H&&H.c(),X=I(),k&&k.c(),ne=I(),$&&$.c(),le=I(),j&&j.c(),this.h()},l(x){const B=bt("svelte-1fw0s1l",document.head);r=v(B,"META",{name:!0,content:!0}),t=v(B,"META",{property:!0,content:!0}),s=v(B,"META",{property:!0,content:!0}),l=v(B,"META",{property:!0,content:!0}),f=v(B,"META",{property:!0,content:!0}),i=v(B,"LINK",{rel:!0,href:!0,type:!0}),d=v(B,"LINK",{rel:!0,href:!0,sizes:!0,type:!0}),y=v(B,"LINK",{rel:!0,href:!0,sizes:!0,type:!0}),T=v(B,"LINK",{rel:!0,href:!0,sizes:!0,type:!0}),B.forEach(c),M=O(x),b=v(x,"DIV",{class:!0});var Q=E(b);W(L.$$.fragment,Q),C=O(Q),A=v(Q,"NAV",{class:!0});var he=E(A);W(w.$$.fragment,he),he.forEach(c),re=O(Q),N&&N.l(Q),se=O(Q),P&&P.l(Q),K=O(Q),H&&H.l(Q),X=O(Q),k&&k.l(Q),ne=O(Q),$&&$.l(Q),le=O(Q),j&&j.l(Q),Q.forEach(c),this.h()},h(){o(r,"name","description"),o(r,"content","Private Conversational AI"),o(t,"property","og:title"),o(t,"content",Ee),o(s,"property","og:type"),o(s,"content","website"),o(l,"property","og:url"),o(l,"content",a=""+(n[8].url.origin+te)),o(f,"property","og:image"),o(f,"content",h=n[8].url.origin+te+"/"+_e+"/thumbnail.jpg"),o(i,"rel","icon"),o(i,"href",g=n[8].url.origin+te+"/"+_e+"/favicon.png"),o(i,"type","image/png"),o(d,"rel","apple-touch-icon"),o(d,"href",m=n[8].url.origin+te+"/"+_e+"/touch-icon-ipad-retina.png"),o(d,"sizes","167x167"),o(d,"type","image/png"),o(y,"rel","apple-touch-icon"),o(y,"href",_=n[8].url.origin+te+"/"+_e+"/touch-icon-ipad.png"),o(y,"sizes","152x152"),o(y,"type","image/png"),o(T,"rel","apple-touch-icon"),o(T,"href",D=n[8].url.origin+te+"/"+_e+"/touch-icon-iphone-retina.png"),o(T,"sizes","180x180"),o(T,"type","image/png"),o(A,"class","grid max-h-screen grid-cols-1 grid-rows-[auto,1fr,auto] max-md:hidden"),o(b,"class","grid h-full w-screen grid-cols-1 grid-rows-[auto,1fr] overflow-hidden text-smd dark:text-gray-300 md:grid-cols-[280px,1fr] md:grid-rows-[1fr]")},m(x,B){u(document.head,r),u(document.head,t),u(document.head,s),u(document.head,l),u(document.head,f),u(document.head,i),u(document.head,d),u(document.head,y),u(document.head,T),R(x,M,B),R(x,b,B),Y(L,b,null),u(b,C),u(b,A),Y(w,A,null),u(b,re),N&&N.m(b,null),u(b,se),P&&P.m(b,null),u(b,K),H&&H.m(b,null),u(b,X),k&&k.m(b,null),u(b,ne),$&&$.m(b,null),u(b,le),j&&j.m(b,null),ee=!0},p(x,B){var we;(!ee||B&0)&&e!==(e=Ee)&&(document.title=e),(!ee||B[0]&256&&a!==(a=""+(x[8].url.origin+te)))&&o(l,"content",a),(!ee||B[0]&256&&h!==(h=x[8].url.origin+te+"/"+_e+"/thumbnail.jpg"))&&o(f,"content",h),(!ee||B[0]&256&&g!==(g=x[8].url.origin+te+"/"+_e+"/favicon.png"))&&o(i,"href",g),(!ee||B[0]&256&&m!==(m=x[8].url.origin+te+"/"+_e+"/touch-icon-ipad-retina.png"))&&o(d,"href",m),(!ee||B[0]&256&&_!==(_=x[8].url.origin+te+"/"+_e+"/touch-icon-ipad.png"))&&o(y,"href",_),(!ee||B[0]&256&&D!==(D=x[8].url.origin+te+"/"+_e+"/touch-icon-iphone-retina.png"))&&o(T,"href",D);const Q={};B[0]&16&&(Q.isOpen=x[4]),B[0]&264&&(Q.title=(we=x[3].find(x[20]))==null?void 0:we.title),B[0]&536871081&&(Q.$$scope={dirty:B,ctx:x}),L.$set(Q);const he={};B[0]&8&&(he.conversations=x[3]),B[0]&1&&(he.user=x[0].user),B[0]&1&&(he.canLogin=x[0].user===void 0&&x[0].requiresLogin),!U&&B[0]&128&&(U=!0,he.loginModalVisible=x[7],it(()=>U=!1)),w.$set(he),x[6]?N?(N.p(x,B),B[0]&64&&V(N,1)):(N=Je(x),N.c(),V(N,1),N.m(b,se)):N&&(ve(),S(N,1,1,()=>{N=null}),be()),x[2]?P?(P.p(x,B),B[0]&4&&V(P,1)):(P=Qe(x),P.c(),V(P,1),P.m(b,K)):P&&(ve(),S(P,1,1,()=>{P=null}),be()),x[1]?H?B[0]&2&&V(H,1):(H=Xe(),H.c(),V(H,1),H.m(b,X)):H&&(ve(),S(H,1,1,()=>{H=null}),be()),x[5]?k?(k.p(x,B),B[0]&32&&V(k,1)):(k=et(x),k.c(),V(k,1),k.m(b,ne)):k&&(ve(),S(k,1,1,()=>{k=null}),be()),x[11]&&x[0].messagesBeforeLogin===0||x[7]?$?($.p(x,B),B[0]&129&&V($,1)):($=tt(x),$.c(),V($,1),$.m(b,le)):$&&(ve(),S($,1,1,()=>{$=null}),be()),j&&j.p&&(!ee||B[0]&536870912)&&nt(j,z,x,x[29],ee?st(z,x[29],B,null):lt(x[29]),null)},i(x){ee||(V(L.$$.fragment,x),V(w.$$.fragment,x),V(N),V(P),V(H),V(k),V($),V(j,x),ee=!0)},o(x){S(L.$$.fragment,x),S(w.$$.fragment,x),S(N),S(P),S(H),S(k),S($),S(j,x),ee=!1},d(x){c(r),c(t),c(s),c(l),c(f),c(i),c(d),c(y),c(T),x&&c(M),x&&c(b),J(L),J(w),N&&N.d(),P&&P.d(),H&&H.d(),k&&k.d(),$&&$.d(),j&&j.d(x)}}}function dt(n){}function Or(n,e,r){var H;let t,s;xe(n,ft,k=>r(8,t=k)),xe(n,Re,k=>r(13,s=k));let{$$slots:l={},$$scope:a}=e,{data:f}=e,h=!1,i=!0,g=[];Ot.subscribe(k=>{r(1,h=k)});let d=!1,m=!1,y,_;Oe.subscribe(async k=>{k.length>0&&(r(3,g=k),Oe.set([]))}),Dt.subscribe(async k=>{r(3,g=[]),Oe.set(g)});async function T(){s&&_&&s!==_&&(clearTimeout(y),r(6,_=null),await new Promise(k=>setTimeout(k,300))),r(6,_=s),y=setTimeout(()=>{kt(Re,s=null,s),r(6,_=null)},3e3)}async function D(k){await Ut(k),t.params.id!==k?await Bt(At.ConversationList):await Lt(`${te}/`,{invalidateAll:!0})}async function M(k,$){await St(k,$)}yt(async()=>{await C()}),$t(()=>{clearTimeout(y)});const b=!t.error&&!((H=t.route.id)!=null&&H.startsWith("/r/"))&&(f.requiresLogin?!f.user:!f.settings.ethicsModalAcceptedAt&&!!Mt);let L=!1;async function C(){let k=await Pt();r(0,f.conversations=k,f),r(3,g=k)}function A(k){L=k,r(7,L)}const w=k=>je(k.detail.id,k.detail.title),U=k=>D(k.detail),re=()=>r(5,m=!0),se=k=>M(k.detail.id,k.detail.title),K=k=>k.id===t.params.id,X=k=>r(4,d=k.detail);function ne(k){L=k,r(7,L)}const le=k=>je(k.detail.id,k.detail.title),ee=k=>D(k.detail),ce=()=>r(5,m=!0),ae=k=>M(k.detail.id,k.detail.title),N=()=>r(2,i=!1),P=()=>r(5,m=!1);return n.$$set=k=>{"data"in k&&r(0,f=k.data),"$$scope"in k&&r(29,a=k.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&8192&&s&&T()},Ct.PUBLIC_APP_NAME,[f,h,i,g,d,m,_,L,t,D,M,b,dt,s,l,A,w,U,re,se,K,X,ne,le,ee,ce,ae,N,P,a]}class jr extends ie{constructor(e){super(),ue(this,e,Or,Ir,fe,{data:0,getProgress:12},null,[-1,-1])}get getProgress(){return dt}}export{jr as component};
