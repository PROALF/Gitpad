{"version":3,"file":"_server.ts-1aa62850.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/conversation/_id_/_server.ts.js"],"sourcesContent":["import \"openid-client\";\nimport { setTimeout } from \"node:timers/promises\";\nimport { c as collections } from \"../../../../chunks/database.js\";\nimport \"fs\";\nimport \"undici\";\nimport \"../../../../chunks/models.js\";\nimport \"../../../../chunks/index.js\";\nimport \"aws4fetch\";\nimport \"@xenova/transformers\";\nlet closed = false;\nprocess.on(\"SIGINT\", () => {\n  closed = true;\n});\nlet abortedGenerations = /* @__PURE__ */ new Map();\nasync function maintainAbortedGenerations() {\n  while (!closed) {\n    await setTimeout(1e3);\n    try {\n      const aborts = await collections.abortedGenerations.find({}).sort({ createdAt: 1 }).toArray();\n      abortedGenerations = new Map(\n        aborts.map(({ conversationId, createdAt }) => [conversationId.toString(), createdAt])\n      );\n    } catch (err) {\n      console.error(err);\n    }\n  }\n}\nmaintainAbortedGenerations();\nasync function POST({ request, fetch, locals, params }) {\n  return new Response(void 0, {\n    headers: void 0,\n    status: 200,\n    statusText: \"\"\n  });\n}\nasync function DELETE({ locals, params }) {\n  return new Response();\n}\nasync function PATCH({ request, locals, params }) {\n  return new Response();\n}\nexport {\n  DELETE,\n  PATCH,\n  POST\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA,IAAI,MAAM,GAAG,KAAK,CAAC;AACnB,OAAO,CAAC,EAAE,CAAC,QAAQ,EAAE,MAAM;AAC3B,EAAE,MAAM,GAAG,IAAI,CAAC;AAChB,CAAC,CAAC,CAAC;AACH,IAAI,kBAAkB,mBAAmB,IAAI,GAAG,EAAE,CAAC;AACnD,eAAe,0BAA0B,GAAG;AAC5C,EAAE,OAAO,CAAC,MAAM,EAAE;AAClB,IAAI,MAAM,UAAU,CAAC,GAAG,CAAC,CAAC;AAC1B,IAAI,IAAI;AACR,MAAM,MAAM,MAAM,GAAG,MAAM,WAAW,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC;AACpG,MAAM,kBAAkB,GAAG,IAAI,GAAG;AAClC,QAAQ,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,cAAc,EAAE,SAAS,EAAE,KAAK,CAAC,cAAc,CAAC,QAAQ,EAAE,EAAE,SAAS,CAAC,CAAC;AAC7F,OAAO,CAAC;AACR,KAAK,CAAC,OAAO,GAAG,EAAE;AAClB,MAAM,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACzB,KAAK;AACL,GAAG;AACH,CAAC;AACD,0BAA0B,EAAE,CAAC;AAC7B,eAAe,IAAI,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE;AACxD,EAAE,OAAO,IAAI,QAAQ,CAAC,KAAK,CAAC,EAAE;AAC9B,IAAI,OAAO,EAAE,KAAK,CAAC;AACnB,IAAI,MAAM,EAAE,GAAG;AACf,IAAI,UAAU,EAAE,EAAE;AAClB,GAAG,CAAC,CAAC;AACL,CAAC;AACD,eAAe,MAAM,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE;AAC1C,EAAE,OAAO,IAAI,QAAQ,EAAE,CAAC;AACxB,CAAC;AACD,eAAe,KAAK,CAAC,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE;AAClD,EAAE,OAAO,IAAI,QAAQ,EAAE,CAAC;AACxB;;;;"}