{"version":3,"file":"_page.svelte-fc4d98e6.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/conversation/_id_/_page.svelte.js"],"sourcesContent":["import { c as create_ssr_component, b as subscribe, g as escape, v as validate_component } from \"../../../../chunks/index3.js\";\nimport { f as findCurrentModel, w as webSearchParameters, C as ChatWindow } from \"../../../../chunks/ChatWindow.js\";\nimport { p as pendingMessageIdToRetry, a as pendingMessage } from \"../../../../chunks/pendingMessageIdToRetry.js\";\nimport { p as page } from \"../../../../chunks/stores.js\";\nimport { e as error } from \"../../../../chunks/errors.js\";\nimport { c as PUBLIC_APP_DISCLAIMER } from \"../../../../chunks/public.js\";\nimport \"@xenova/transformers\";\nimport { w as writable } from \"../../../../chunks/index2.js\";\nimport { g as getMessages } from \"../../../../chunks/LocalDB.js\";\nconst params_writable = writable(\"\");\nlet title_ret = \"BlindChat\";\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let title;\n  let $page, $$unsubscribe_page;\n  let $$unsubscribe_pendingMessageIdToRetry;\n  let $$unsubscribe_pendingMessage;\n  let $$unsubscribe_error;\n  let $$unsubscribe_webSearchParameters;\n  $$unsubscribe_page = subscribe(page, (value) => $page = value);\n  $$unsubscribe_pendingMessageIdToRetry = subscribe(pendingMessageIdToRetry, (value) => value);\n  $$unsubscribe_pendingMessage = subscribe(pendingMessage, (value) => value);\n  $$unsubscribe_error = subscribe(error, (value) => value);\n  $$unsubscribe_webSearchParameters = subscribe(webSearchParameters, (value) => value);\n  let { data } = $$props;\n  let id = \"\";\n  let messages = [];\n  console.log(\" - \" + $page.params.id);\n  let webSearchMessages = [];\n  let loading = false;\n  let pending = false;\n  let loginRequired = false;\n  params_writable.subscribe(async (value) => {\n    if (value != id) {\n      id = value;\n      let res = await getMessages(value);\n      if (res != void 0) {\n        messages = res;\n      }\n    }\n  });\n  if ($$props.data === void 0 && $$bindings.data && data !== void 0)\n    $$bindings.data(data);\n  let $$settled;\n  let $$rendered;\n  do {\n    $$settled = true;\n    {\n      $page.params.id;\n    }\n    title = title_ret;\n    loginRequired = (data.requiresLogin ? !data.user : !data.settings.ethicsModalAcceptedAt && !!PUBLIC_APP_DISCLAIMER) && messages.length >= data.messagesBeforeLogin;\n    $$rendered = `${$$result.head += `<!-- HEAD_svelte-1az6e94_START -->${$$result.title = `<title>${escape(title)}</title>`, \"\"}<!-- HEAD_svelte-1az6e94_END -->`, \"\"}\n\n${validate_component(ChatWindow, \"ChatWindow\").$$render(\n      $$result,\n      {\n        loading,\n        pending,\n        messages,\n        searches: { ...data.searches },\n        models: data.models,\n        currentModel: findCurrentModel([...data.models, ...data.oldModels], data.model),\n        settings: data.settings,\n        loginRequired,\n        webSearchMessages\n      },\n      {\n        webSearchMessages: ($$value) => {\n          webSearchMessages = $$value;\n          $$settled = false;\n        }\n      },\n      {}\n    )}`;\n  } while (!$$settled);\n  $$unsubscribe_page();\n  $$unsubscribe_pendingMessageIdToRetry();\n  $$unsubscribe_pendingMessage();\n  $$unsubscribe_error();\n  $$unsubscribe_webSearchParameters();\n  return $$rendered;\n});\nexport {\n  Page as default\n};\n"],"names":[],"mappings":"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"}